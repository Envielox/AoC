a = ">><><<>><<<>>>><<>>>><<<<><<>>>><<>><<>>>><>>><<>>>><<>>>><<<>>>><<<<><<<<>><<>><><<><>>>><>><>>><<<<>>>><<><<>>><<>><<><>>><<<>><>>><<>>>><>>>><<<>><>><<<<><<<<>><<>><<<<>><>>><<>><<>><<<>>>><<<>>><<>>>><<>><<>>>><<<<>>>><<>><<<>><<>><<><<<<>><>><<<>><<<>>>><<<>><<<>><<<<><><<>><>>>><<<<><>>>><<>>>><<>>>><<<>>>><<>>><<<>>>><<>>><<<<>><<<>>>><>>>><<<>>><>>>><<>><<<>>><>>>><<<>>><<><<<>><<<<><>>><<<<><<<<>>>><<>>><<<>><<<<><><>>>><<<<>>>><<<<>>>><<>><<<>>><><>>>><<>>>><<><<<><<>>>><<<>>>><<>><<<><>>><<<>><<<><<<<><<<<><>>>><<>>>><<<><><>><<>>><<<>>><<>>>><<>><<<>><<<>>><<>>><<<>>>><<<>>>><>>>><>>>><<<>><<<><<>>><<<<>>>><<<>>><>>><<<<>>><<<>>><<<<>>>><><<><<><<><><><<<<><<><<>>><<<>><<<<>>><<<>>><>>><<><<>>>><<><<<<><<><<<<>><>>>><<>><<<>>>><<<<>>><<<<>><<<><<<><>><<<<>><<><<<>>>><>><>>><>>>><<<>><<>><<<>>><<>>><<<<><<>>><>><>><<<>>>><<>>>><<<><>><<<><<<>>><<<<>>><<>><><<<<>><><<<>>><<<>><<<<><<<><>>><<<<>>>><<<<><<>><<<>>>><<<<><<<>>>><<><<>>><<<>>><>>><><><<><<<<>>><><>>><>>>><>>>><<>><<<<>>>><<>>>><>>>><<>>><>>><<>><<<>>>><<<>><<<<>><<>>>><<<<><<<<>>>><>>><>>><<<<>>>><<<<>><>>>><<<><>>>><<<>><<>>><<>>><<><<<><><<<<><<<<>>>><<<<><<>>><<<<><<<<>><<><<>>><<><>><<<<>>>><>>><>><<<>>>><<<<>>><<>>><>>>><<<<>>><<<<><<>>>><>><<<>>><<<<>>><<><<<>><<>>><<<>><<>><>>>><>>>><>><<<>>><><<<>>><<>>>><>>>><<>><>><<>>><<<<>>>><><<<>>><<<<>>><<<<><<<>>><<>>><<<>><<<>><<>>>><<<>>><<<><<><>>><<<<><<>>>><<<><>>>><<>><<<><<<><>><>>><<><<<>><><<<>>><<<><>><<<>><>>>><>><<<><<<><<<<>>>><<>>>><<>>><<<><<<<>>>><<<<>>>><<<>><<<<><<<><<<<>>><<>>><<>><>><<<<>><<<<>><<><<<<>><<<>>><>>>><<>><<<>>>><<<>><<<<>>>><<<>>><<>>><<>>><<>>>><<<<>>><<<<><><<<>>><<<<>>>><<<<><><<<><>><<>>><<>>>><>>><<<<>><>><><<><<>>><<>>>><>>>><<>>>><><<<>>><><<>>>><<>>><><<>><<<>>>><<>>>><<<>>><<<<>><<<>>>><<<<>>><>><>>><<>>>><<<<>><<>>><<>>>><>>>><><<<<>>>><>>><><<<<>><<>>>><<<><<>>>><<>>><>>>><<<>>><<<<><>>>><<<<>>>><<><<>>><<<<><<<<><<<<>><<><<<<><<<<>>>><<<<>>><<<<>>><<<><><>><>><>>>><>><<<<>>>><<<<>>>><<<<><<><<<>>><>>><>>><<<>>>><<<>>><<<>><<<<>>>><<><>>>><><<<<>><<<>>>><<<>><<<<>>>><<<<>>>><<>><<>>><>>><<>>><>><<<><>>><>><<>><<><<<>><<<>>>><<>>><<<<>><<<>><<<<><<<<><>><<<>>>><><<>>><>>>><<>><<<>>><><>><<><<<>><<>>>><>>><<>>>><<<<><<><<>><<><<<>><<>>><<<<>>><<<<>><><<><<<<>><<>>><<>>>><<<<>>>><<>>><>>><>>>><<>><<<<><<>>>><>>>><<>><<>>><<>>><<>>>><<<><<<>>><<<<>><<<<>>><<>>><<>><>>>><<<<>><<<>>>><>>><<<><><><<>>><<<<>>>><<><<>>><<<<>>><<<<>>>><<<><<<>>>><<>><<>>><<<<>>>><<><<<>>>><<>>>><<<<><<>>><<>>><>>>><><<<<>>><<>>>><<>><>>><>><>>><<>><<>>><<>>>><<<<>>>><<<<><<<>>><<<<>><<>>>><>>>><<>>>><>>>><<>>>><<<<>>><>>>><<<<><<<<>>>><<<<>><<<<><>>><><><><<<>>>><>>><><<<<>><<>>><<>><>><<><><<<><<>><><<><<<>><<<<><>>>><<>>>><<<>><>>>><>>><<<<>>>><<<>>>><<>>>><<<>>><<<><<<>><<><<<>>><<>>><<<<>>>><<>>>><<<>><<>>><<<>>><<<>><<<><>><<<<>>>><<<>>>><<<<><><<>><>>><<<<>><>>><<<><<<<><<<<>>>><>><<><<<<>>><<<>>><>><<<<>>><<<<><<<<>><<<<><<<><<<>>>><<<<>>><>><<>>>><<<<>>>><<<<>>><<>>>><<><<<><>><<<>><<<<>>><>>><<<<>>>><<>>><<<<>>><<><<><<<<>><<<>>><><>>>><<><<<>><<>><<<<>>>><<<<>>><>><<<>><<<>>><<>><><<<><<<<><<<>>>><<<<>>>><<>>><<><<<>><<<><><<<><<><<<>><>><><>><<>>><<>>><><<<>><>><<>>>><<>>><<<>><><<<><<<><<<>><<<<><<<><<>>>><<<<><<<<>>>><<<><<<<>><<<>><<<<>><<<<>>>><>>>><<>><<<<>>><<<><<>>>><<<>><<<<>>>><<<><<>>>><<<><<<>>><<<<><<<<>><<>>><<>>><<<>>><>>><<<>>>><<<<><<<<>>><><>>>><<<>>><<<<>>><<>><<<<>><><>>>><<<>><<>>><<><<<>>><>><<<>>><<<<>>><<<<>>>><<<>><<<>>>><<<<>><<<<><<>>><>>>><<<><<<<>><<<<><<<<><<<>><<><<<>>>><><<<><<><<<>>>><<<>>>><>><<<>>><<<<>>>><<>>><<<<>>>><<<<>>><<><<><<<<>>>><><>><<<<>><<<>><<<<>>>><<<<><<<>><<>>>><<<>><<<<><<<>><<>>>><>>>><>><<>><<<<><<<><<<><>><<>>>><><<<<>>>><<<><<<><>><>><<>>><<<>><<<><<<<>><<>>><<<<>>>><<<<>>><<><<>>>><<<<>>><<>>>><<<>>><>>>><<<><<>>>><<<<>>><<<<>>><<<<><<>>>><>>>><<>><<<>><<<><<<<>><<<>>>><<><<>>><>><<><<<>><>><>><<<>><<<>>><<>><>>>><<<<><<>>><<<>><<<>>>><<<>>><>>>><<><<<<>>>><<<>>><<><<<<>><<<>>>><<<>>>><<<<>><>>>><<<>>><<<<>>>><<<>><<<>>>><<>>>><<<<>><<<>>><<<>>><<<<>>><>><<<<><<<><<>>><>>>><><>>><<<>><<>><<>>><>>><>><>>><><<<>>>><>>><<<<>>><<<>><<<>><<<<><<>>>><<>><<<>>>><<<><<<>>><<<>><<><<<<>>>><<<<>><<>>><<<>><>>>><<<><<<<>><<<<><><<<>><>>><<>><<<>><<>><<<>><>><<>>><<<<><<<<>><<<<>>>><<<<><<<><<>><<<<>>><<<<><>>>><<<>><<><<<<>><<><>>><<<<>><>><<<><<>>>><>><<><<<<>>><>><<<<><<<<>>>><<<<>>><>><>>>><<<>>>><><<<<><<<<>>><<<><<<>><<>><<<<><<<>><<>><<<>><<<<>>>><<<<>>><<><<<<>><<>>><<>>>><<<>>>><<>>><<><>><<>><>><<<<>><<<>>>><>>><><<<>>><><<><<<><<>><<><<>><>>>><<<<><>>>><<<<>>><<<<>><<<>>><<<><><<<<>><<<><<<><<<><<<><<>>>><<<><<<<>>><<<><<<>><<<>>>><<>>><<>><<<<>>><>><<<<>>><<<><<<><<<<><>><><>><<<<>>><<<>>>><>><>>><<<>>>><<<<>>>><<<>><<<<>>>><<<>>><<><<<<>>>><<><<><<><>>><>>><<<>>><<<<>>><<<>><<<>><<>>>><<<<>><<<>><<<><<<<><<<>>><<<<>>><<><<>>>><>><>>>><<<<><>><<<<>>>><<>>>><<>>>><><<<<>><<<<>><<<>>><<><>><<>>>><<<><>><>><<>>>><<>>>><<>><>><>>><<<>><<<<><<<>><<>>><<>>><<<<><<<<><<>>><<>>><<<<>>><<<<>><<<<>>><>>><<<<>><<<<>><<>>>><<>>><<<<>><<<<>>>><<<>><>>><><>><>>><<><>>><<<>>>><>><>><><<<>>><>><>>>><>><><<<>>><<>>><<>>><>>>><<<<>><<<>>>><<>>><<<<>><<>><>>><<><<>>>><<<><>>>><>>><<>><<>><<<<><>><<<<><<>>><>>><>><>><<<<>><<<>><>>><<<<><<<>>>><<<<>><>>>><<<>><<<>>>><<<<><<<<>><<<<><<>><<<>>>><<<>>><<>>>><>><<>><<<<>>><<<>><>><>>><<>><<<<>>>><<<<>><<<>>><<<>><<<<><<><<<>>><<<<>><<<>><<>>>><<>>>><>><<<>>><<>><>><>>>><<<<><<<>>>><<<<>>><<<<>>>><<>>><<<<>>>><<<><><<>>><<<<>>><>>>><<>>><<<>>>><<<<><<<>>>><>>><<<><<<>><<><<<<><<<><<><<<<><<<><<<>><><<<>>>><<>>><<<<><<<<><<<<>>><<<<><><<<<><<>>><<<<>><><>>><<<<>><<<<>><<<>>>><<>>>><<<<>><>>>><<<<>><<<<>>><><<<<>><<<><<<<>>>><<<<>>>><<<<>>>><<<<><<<>>>><>><<<<>>><<><><<<<>>><>><<<>>>><<<>><<<<><>><<><<<><<<>>><<>>><<<>>>><<<>>><<<>>><>>>><<<><<<<>>>><<<<>>><<<<>><>>><<>>><<<<>>><>><<<>><<<>><<<<><<<>><<<<>>>><>><<>><<<>><<<>>>><<<<><<<<>><>>><<>><<<<><<<>>>><<<<><<<<><<>>>><<<>>>><<<>>>><<<>><<><<<<>>>><<>><<<<>>><<><<<><><>>>><<<<>>>><>><<><<<><<<>><<<<><><<<>>>><<<<><>>>><<<<>>><<>><<><<<>>>><<<>>><<<>><<>>><>><<<>>>><<>>><<>>>><>>>><<<>>><><<<<>>>><<<>><<<<>>><<<<>><>><<<<>>><>>>><<<>>>><<<>>><>>><<<><>>>><>>><<<>>>><<<<>>><<<<><<<<>>><><<<<>><<><<<<>>><<<<>><>><<<<><<>><<><<<>>>><<<><<<><<>>><>>>><<<<><<<<>>><<<>>><>>>><<<<>><<<>>><<<>>>><<>>><<<<><<<<>>><<<>>><<>><>>><<<<>>>><><<>>><<>>>><<<>><><>><<>>><<<<>>><><<<>><>><<<<>>>><<<<><<<<><<<<><<>><<><<>>>><<<<>>>><<<>>>><<<<>>><<<>>><<>><><<<>>><><>><<<<>><<<<>>>><<<<>>><>><<>><<>><<<<>><<<<><<>>><<<<>>><<<>>>><>>><<<<><<<>>><>>><<<>>>><<>><>>>><<<<>>><<<<>>><<>><<><<><>>><<<><>>>><>>><<<>><<<>>>><<<<>>>><<><<<<>><<><<<<>>><<<>>><<<<>>>><<<><<<>>>><>>>><<><<<<>><<<>>><<<>>><<<<>>><>>>><<<>>><<<<>>><>><<>><<<<>><<>><<<<>>>><<>><>><<<<>>><><><<<<><<>>>><<>>>><<><<<><>>><<>>>><<<<>><<<<>>><<<>>><<>><<<>><<<>>><<<>>><<<<>>><<<>><>>><><<<<><>>><<<<><<>>>><<<><<<>>>><>>>><<<<><<<<>><<><<<<><<>><<<<>>>><<<<>><>>>><<<>><<<<>><<<>>>><>>>><<>>>><<<>>>><<>><<>>>><<<><<<>>>><<<>>><<>>><<<>>><<><<<>><<>><<>>>><<<<>>><<<<>>><>>><<<<>><<<>>>><>>><><<<<>>>><>><<<<>><<>>>><<<<><<<>>><<<<><<<>><<<><>><>>><<<<>><<>>>><>>><<<<><><<<<><<>>><<<<>>><<<>>>><>><<<<>>>><<<>>>><<>><>><<<<>>><<>>>><>>>><<<<><<<<>>>><<<><<><<<<>>>><<><><<<<><<<><<<>>>><>><<>>>><<>><<<<><<<><>><>>>><<<>><<>>><<><<>><<<<>><<<<>>>><<<<><<><<<>>><<<<>><<<><<<>>>><<<<>>><<<<>>><<>>><>><<>>>><<<>><<<>>><<<>>><<<<>>>><>><>>>><<<<>><>>><<<>><<><<<>>><<<>>><<<>>>><<<>>><<<><<<<>><><<><><<<<>>>><>><><>>><<<<>>>><<>><<>>>><<>><<>>>><><><><<<<>>><<<>>>><>>>><<>><<<>><<<>>><>>><>>><>>><<<>><>><<<<>>><<<<>>><<<<>><<>>><<<<>>>><<<<>>>><<><<<><<>>><<>>>><<<<>>><<<<>>>><<<>>>><<<>>><<<<>><><<<<>>><<<<><>>><>>>><<<<><<>>>><<<<>>>><<<<>><<<<><<<<>>><<<<>>><<<>>><<<>>><<<>><>><<<<><>><<<<>>>><>>><<<><<<<>>>><>>><<<>>>><<<<>>><<<<>>>><<<>><<>>><<<<>>><<><<>><<>>><<>><<<<>><<>><>><<<>><<>>>><><<<>><<<<><<<><<>>>><>><<>><<<>>>><<>>>><<<>>>><<<<><<<>>>><<>>><<><<><<>>>><<>>>><<<<>>>><<>><<<<>><<<><><>>>><<<<><>>>><<<<>>><<>>>><<<<>>><>>><<<<>>><<>>><<>><<>>><>>>><<<<>><<<<>><<>>><><>><>><<<>>>><<<<>>>><<<<>><<><<<>>><<<<>><<<<>><<>>><<>>>><>>>><<>><>>><<<<>>><<<><>>><<>>><><<>><<<><<<<>>>><<<<><<<<>><<>><>>>><<>><<>>>><>>>><>>><<><>><<>><>>>><<<>>><<<>>><<>>><<<<>>>><<<>>><>><>>><<><<<>>>><<>><>>><<<><<>><<<><<<>><<<>>><<<<><><<<><<<<>>>><<<<>>>><<<>>><<<<>>><<<><<>><<<<><<>>>><<<<>>><<<<><><>>>><<>>><<<>>><>>>><<><<<><<<>>><<<<>>>><>>>><>><<><><<>>>><>><<<><<<<>><<<<>><>>>><<>><<<<>>><<<>>><<<>>><<<<>>><<>>><<<<>>>><<<<>>><<><<<>>><<<>><<<<><><<<<>><><<<<>>>><<<<><>>><>>>><<<><<<>>><<<><<<<>><<<<>>>><<><>>><<<><<<<>>>><<<><<<<>>><<>>>><<<>><<<<>><><<><><<>>>><<<>><><<<><<<<><<<<>>><<>>>><<<<>>>><<<<>><<<<>>><>>><<<<>>><<<<>>><<<>>><>>><>>>><<<>><<><<<<>><>><<<>>><<><>><>>>><<<<>><<<<>><<>>>><<<>>><<>><<<<>><<<<>><<<<><<><<<<>>><<<<>>>><<<>>><><<<<><><<<<>>><<<>>>><>>><>>><<>>><<<><>><<><>><>><<>>><<<<>>><<<<>>><<<<><>><<<<><<<>><<<>>>><<>>><<<>>><<>><<>>>><><>>><<<>><<><<<<>>>><>><<<<>><<<>>>><<>>><<<<>>><<<>>>><<<>>>><<<><<><<<<>>><<<>>>><<>>><<<>>>><><<<<>>>><<>>>><<<>>><<<<><<<>><<>>>><<<<>>><>>><<<<>><<<<><<<<><<<>>><>><<<>>>><<>><<<<>>>><><<<<>>><<<>><<>>><>>><<<>>>><<>><>>>><<<>><<>><<<>>><>>><<<<>>>><<><>>>><<<<>><<>>>><>>><<<<>><<<<><<><<><>>><>>><<<<>>>><><<>>>><<<>><<<>>><<>>>><<<<><<<<><>><<<<>>><<<<>>><>><>><<<>>>><<<>>>><<<>><>><<><<>>>><>>>><<>><>>>><<<><<<<><<<>>>><<>>><>>><>>><<<<>><<>>><<<<><<<<>>>><>><<<>>><>>>><<<<><>>><<<<>>>><>>><<<><>>>><>>>><>><<<<>>><<><<<<>>><<<<>>>><<<<><>>><<<<><<>>>><>>><<>>><<>>><<>>>><<<<>>>><<<>>>><<>>>><<<<>>><><><>>><<>>>><<<>><<>>>><<<<>>><<>>>><<<<>><<<><<<<><>>>><>>><<<>><>>><<<>><>>>><<<>>><<>>><<<><<<<>>><<>>>><<<<><>><>><<><<>>>><<<>>><<<<>><<<<>><<<><<<<>><<<<><<<<>>><<<>>><><<<><<<<><<<<>><<<<>><<><<<<>><<<><><>><<<>><>><<>>><<>>><>>><<>>>><<><<<>><<>><<<<>>>><><<>><<><<<<>>>><>>><<<<>>><>>>><<<>>><<<<>>><<<>>><<<>>><<<<><<<<>>><<<<><<><<>>><<<><<<>>><<<<>>>><<<><<<<>>><<<>><<<>>><<<<>>>><<<<>><<<<>>><<<>>><<<>><<<>>>><<<>>>><>><<<<>>><>>><>>><>>>><<<<>>>><>>><<<<><<<<>>><><<>>><<<<>>><<<>>><<<<><<<>>>><<<>>>><<>>><<>>>><<>><<<"
sample = ">>><<><>><<<>><>>><<<>>><<<><<<>><>><<>>"

shapes = [
  set([0, 1, 2, 3]),
  set([1, 1j, 1+1j, 2+1j, 1+2j]),
  set([0, 1, 2, 2+1j, 2+2j]),
  set([0, 1j, 2j, 3j]),
  set([0, 1, 1j, 1+1j]),
]

jet = [1 if x == '>' else -1 for x in a]

shape_index = 0
jet_index = 0
active = None
rocks = set()

def do_rock():
    global active
    global rocks
    global shape_index
    max_height = -1 if len(rocks) == 0 else max(map(lambda x: x.imag, rocks))
    start_pos = 2 + 1j * (3 + 1 + max_height)
    active = set([x + start_pos for x in shapes[shape_index % len(shapes)]])
    shape_index += 1
    #p()
    
    while do_step():
        #p()
        pass
    rocks = rocks.union(active)
    active = set()

def do_step():
    global jet_index
    global active
    j = jet[jet_index % len(jet)]
    jet_index += 1
    new_pos = set([x + j for x in active])
    min_pos = min(map(lambda x: x.real, new_pos))
    max_pos = max(map(lambda x: x.real, new_pos))
    if len(new_pos.intersection(rocks)) == 0 and min_pos >= 0 and max_pos < 7:
        active = new_pos
    new_pos = set([x - 1j for x in active])
    low_pos = min(map(lambda x: x.imag, new_pos))

    if len(new_pos.intersection(rocks)) == 0 and low_pos >= 0:
        active = new_pos
        return True
    return False

def p():
    print(active)
    max_height = 0 if len(rocks) == 0 else max(map(lambda x: int(x.imag), rocks))
    for y in range(max_height + 3, -1, -1):
        for x in range(7):
            v = x + 1j * y
            if v in active:
                print('@', end ='')
            elif v in rocks:
                print('#', end ='')
            else:
                print('.', end='')
        print()
    print()

#for i in range(2022):
#    do_rock()
#max_height = 0 if len(rocks) == 0 else max(map(lambda x: x.imag, rocks))
#print(max_height + 1)

jet_idx_coll = []
for i in range(1000):
    max_height = 0 if len(rocks) == 0 else max(map(lambda x: x.imag, rocks))
    jet_idx_coll.append((jet_index % len(jet), max_height))
    for j in range(5):
        do_rock()

# find cycle len
cycle = [x[0] for x in jet_idx_coll]
for i in range(400):
    if cycle[- i: ] == cycle[-2 * i: -i]:
        print("Cycle len seems to be {}".format(i))
        cycle_len = i
        break
    pass

target = 1000000000000 // 5

rem = target % cycle_len

for i in range(1000):
    t = i * cycle_len + rem
    if t < 1000 and t >= 1000 - cycle_len:
        break

full_cycle = (target - t) // cycle_len
per_cycle_gain = jet_idx_coll[t][1] - jet_idx_coll[t-cycle_len][1]

result = jet_idx_coll[t][1] + full_cycle * per_cycle_gain
print(int(result) + 1)
